<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title></title>
</head>
<body>
<video id="video" controls width="270" autoplay style="display: none">
    <source src="http://www.w3school.com.cn/example/html5/mov_bbb.mp4" type='video/mp4'>
</video>

<canvas id="myCanvas" width="270" height="135" style="border:1px solid #d3d3d3;">
    Your browser does not support the HTML5 canvas tag.
</canvas>
<div id="buffer" style="display:none;"></div>
</body>
<footer>
	<script type="text/javascript">
		var v = document.getElementById('video');
		var c = document.getElementById('myCanvas');
		var ctx = c.getContext('2d');
		var i;

		// 播放
		v.addEventListener('play', function () {
			i = window.setInterval(function () {
				ctx.drawImage(v, 0, 0, 270, 135);
			}, 20);  // 每0.02秒画一张图片
		}, false);

		// 暂停
		v.addEventListener('pause', function () {
			window.clearInterval(i);  // 暂停绘画
		}, false);

		// 结束
		v.addEventListener('ended', function () {
			clearInterval(i);
			console.log("1111");
		}, false)
	</script>
</footer>
</html>